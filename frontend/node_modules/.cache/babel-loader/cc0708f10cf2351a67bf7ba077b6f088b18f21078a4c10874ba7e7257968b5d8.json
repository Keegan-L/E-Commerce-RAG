{"ast":null,"code":"var _jsxFileName = \"/Users/keeganli/Desktop/Github/Instalily RAG/frontend/src/components/ChatInterface.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Box, Paper, TextField, Button, Typography, CircularProgress } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport ChatMessage from './ChatMessage';\nimport ProductCard from './ProductCard';\nimport { sendMessage } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInterface = () => {\n  _s();\n  const [messages, setMessages] = useState([{\n    role: 'assistant',\n    content: 'Hello! I\\'m the PartSelect assistant. How can I help you with refrigerator or dishwasher parts today?'\n  }]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll to bottom when messages update\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const handleSend = async () => {\n    if (input.trim() === '') return;\n\n    // Add user message\n    const userMessage = {\n      role: 'user',\n      content: input\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setLoading(true);\n    try {\n      // Send to backend\n      const chatHistory = messages.filter(msg => msg.role === 'user' || msg.role === 'assistant');\n      const response = await sendMessage(input, chatHistory);\n\n      // Add assistant response\n      setMessages(prev => [...prev, {\n        role: 'assistant',\n        content: response.response,\n        partInfo: response.part_info\n      }]);\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setMessages(prev => [...prev, {\n        role: 'assistant',\n        content: `Sorry, I encountered an error: ${error.message}. Please try again later.`\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    elevation: 3,\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '80vh',\n      width: '100%',\n      maxWidth: '800px',\n      margin: '0 auto',\n      borderRadius: '12px',\n      overflow: 'hidden'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        backgroundColor: '#2c3e50',\n        color: 'white'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: \"PartSelect Assistant\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        children: \"Ask me about refrigerator and dishwasher parts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flex: 1,\n        p: 2,\n        overflowY: 'auto',\n        backgroundColor: '#f5f5f5'\n      },\n      children: [messages.map((message, index) => /*#__PURE__*/_jsxDEV(ChatMessage, {\n        message: message\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)), loading && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          my: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        backgroundColor: 'white',\n        borderTop: '1px solid #e0e0e0',\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        variant: \"outlined\",\n        placeholder: \"Type your message...\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyPress: handleKeyPress,\n        size: \"small\",\n        sx: {\n          mr: 1\n        },\n        multiline: true,\n        maxRows: 3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        endIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 20\n        }, this),\n        onClick: handleSend,\n        disabled: loading,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"MFzgVMgRSsp/cxjpLeyWT+db0lY=\");\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Box","Paper","TextField","Button","Typography","CircularProgress","SendIcon","ChatMessage","ProductCard","sendMessage","jsxDEV","_jsxDEV","ChatInterface","_s","messages","setMessages","role","content","input","setInput","loading","setLoading","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSend","trim","userMessage","prev","chatHistory","filter","msg","response","partInfo","part_info","error","console","message","handleKeyPress","e","key","shiftKey","preventDefault","elevation","sx","display","flexDirection","height","width","maxWidth","margin","borderRadius","overflow","children","p","backgroundColor","color","variant","fileName","_jsxFileName","lineNumber","columnNumber","flex","overflowY","map","index","justifyContent","my","size","ref","borderTop","fullWidth","placeholder","value","onChange","target","onKeyPress","mr","multiline","maxRows","endIcon","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/keeganli/Desktop/Github/Instalily RAG/frontend/src/components/ChatInterface.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Box, Paper, TextField, Button, Typography, CircularProgress } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport ChatMessage from './ChatMessage';\nimport ProductCard from './ProductCard';\nimport { sendMessage } from '../services/api';\n\nconst ChatInterface = () => {\n  const [messages, setMessages] = useState([\n    { role: 'assistant', content: 'Hello! I\\'m the PartSelect assistant. How can I help you with refrigerator or dishwasher parts today?' }\n  ]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll to bottom when messages update\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleSend = async () => {\n    if (input.trim() === '') return;\n    \n    // Add user message\n    const userMessage = { role: 'user', content: input };\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setLoading(true);\n    \n    try {\n      // Send to backend\n      const chatHistory = messages.filter(msg => msg.role === 'user' || msg.role === 'assistant');\n      const response = await sendMessage(input, chatHistory);\n      \n      // Add assistant response\n      setMessages(prev => [\n        ...prev, \n        { \n          role: 'assistant', \n          content: response.response,\n          partInfo: response.part_info\n        }\n      ]);\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setMessages(prev => [\n        ...prev, \n        { \n          role: 'assistant', \n          content: `Sorry, I encountered an error: ${error.message}. Please try again later.`\n        }\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  return (\n    <Paper \n      elevation={3} \n      sx={{ \n        display: 'flex', \n        flexDirection: 'column', \n        height: '80vh',\n        width: '100%',\n        maxWidth: '800px',\n        margin: '0 auto',\n        borderRadius: '12px',\n        overflow: 'hidden'\n      }}\n    >\n      {/* Header */}\n      <Box sx={{ p: 2, backgroundColor: '#2c3e50', color: 'white' }}>\n        <Typography variant=\"h6\">PartSelect Assistant</Typography>\n        <Typography variant=\"body2\">\n          Ask me about refrigerator and dishwasher parts\n        </Typography>\n      </Box>\n      \n      {/* Messages Area */}\n      <Box \n        sx={{ \n          flex: 1, \n          p: 2, \n          overflowY: 'auto',\n          backgroundColor: '#f5f5f5'\n        }}\n      >\n        {messages.map((message, index) => (\n          <ChatMessage \n            key={index} \n            message={message} \n          />\n        ))}\n        {loading && (\n          <Box sx={{ display: 'flex', justifyContent: 'center', my: 2 }}>\n            <CircularProgress size={24} />\n          </Box>\n        )}\n        <div ref={messagesEndRef} />\n      </Box>\n      \n      {/* Input Area */}\n      <Box \n        sx={{ \n          p: 2,\n          backgroundColor: 'white',\n          borderTop: '1px solid #e0e0e0',\n          display: 'flex'\n        }}\n      >\n        <TextField\n          fullWidth\n          variant=\"outlined\"\n          placeholder=\"Type your message...\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyPress={handleKeyPress}\n          size=\"small\"\n          sx={{ mr: 1 }}\n          multiline\n          maxRows={3}\n        />\n        <Button \n          variant=\"contained\" \n          color=\"primary\" \n          endIcon={<SendIcon />}\n          onClick={handleSend}\n          disabled={loading}\n        >\n          Send\n        </Button>\n      </Box>\n    </Paper>\n  );\n};\n\nexport default ChatInterface;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}